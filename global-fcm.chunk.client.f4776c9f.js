window.chesscom=window.chesscom||{},window.chesscom.routes=window.chesscom.routes||{},Object.assign(window.chesscom.routes,{web_fcm_callback_register:{tokens:[["text","/callback/fcm/register"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_fcm_callback_browser_permission_request:{tokens:[["text","/callback/fcm/browser-permission-request"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]}}),(("undefined"!=typeof self?self:this)["wpChessCom_-qhK"]=("undefined"!=typeof self?self:this)["wpChessCom_-qhK"]||[]).push([[753],{2793:function(e,n,o){o.d(n,{j7:function(){return getWindowTitle},bM:function(){return getWindowLocation},k_:function(){return s},qD:function(){return t},e0:function(){return i},sJ:function(){return bookmarkPage},kY:function(){return a},Cz:function(){return sendEmail},tq:function(){return isMobile},qs:function(){return getBrowser}});const getWindowTitle=()=>encodeURIComponent(window.document.title),getWindowLocation=()=>encodeURIComponent(window.location.href),s=window.location.pathname,t=getWindowTitle(),i=getWindowLocation(),bookmarkPage=()=>{if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(t,i,"");else if(window.external&&"AddFavorite"in window.external)window.external.AddFavorite(i,t);else{const e=-1!==window.navigator.userAgent.toLowerCase().indexOf("mac")?"Cmd":"Ctrl";alert(`Press ${e}+D to bookmark this page.`)}},r={chrome:"Chrome",edge:"edge",firefox:"Firefox",ie:"IE",safari:"Safari"},a=(Number.POSITIVE_INFINITY,()=>{window.print()}),sendEmail=(e,n)=>{window.location.href=`mailto:?${e}&${n}`},isMobile=(e=window.navigator.userAgent)=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),getBrowser=(e=window.navigator.userAgent)=>{let n,o=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(((e=window.navigator.userAgent)=>null!==e.match(/Edg/))(e)){const n=e.indexOf("Edg");let o=4;e.match("Edge/")&&(o=5);const s=n+o;return{name:"Edge",version:parseInt(e.substring(s,e.indexOf(".",s)),10)}}return/trident/i.test(o[1])?(n=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(n[1]||"-1",10)}):o[1]===r.chrome&&(n=e.match(/\bOPR\/(\d+)/),null!=n)?{name:"Opera",version:parseInt(n[1],10)}:(o=o[2]?[o[1],o[2]]:[window.navigator.appName,window.navigator.appVersion,"-?"],o[0]===r.safari&&(n=e.match(/version\/(\d+)/i),null!=n&&o.splice(1,1,n[1])),"MSIE"===o[0]?{name:r.ie,version:parseInt(o[1],10)}:{name:o[0],version:parseInt(o[1],10)})}},8647:function(e,n,o){o.r(n),o.d(n,{requestHandler:function(){return requestHandler}});var s=o(2793),t=o(423);const i={apiKey:"AIzaSyAoMkjy3zKkqAcPqb2tazB-IOe98QR9psc",authDomain:"chesscom.firebaseapp.com",databaseURL:"https://chesscom.firebaseio.com",projectId:"chesscom",storageBucket:"chesscom.appspot.com",messagingSenderId:"27129061667",appId:"1:27129061667:web:0099c30132ad07e0d22c96"},r="BD1OOymDvZcsnbr0x6yb4QQFP29QOC1e_UzFXNQ1Km5F1K-KinJjBZW86K6_huzwMklH0hJSVXOyoax3RiKULLM";var a=o(5752),c=o(425),d=o(7074);o(5928);let u=null,w="";function getMessagingToken(e=!0){u.getToken().then((e=>{e&&d.Z.post(c.Z.generate("web_fcm_callback_register"),{token:e,browser:`${(0,s.qs)().name}${(0,s.qs)().version}`})})).catch((()=>{e&&getMessagingToken(!1)}))}function requestPermission(){Notification.requestPermission().then((e=>{"granted"===e&&getMessagingToken()}))}function customDialogShown(e){d.Z.post(c.Z.generate("web_fcm_callback_browser_permission_request"),{allowed:e})}function requestHandler(e){e===t.U3.NOTIFICATIONS_REQUEST_CONFIRM&&(customDialogShown(!0),requestPermission()),e===t.U3.NOTIFICATIONS_REQUEST_DECLINE&&customDialogShown(!1)}window.context.user&&async function boot(){const e=await function registerWorker(){const e=window.Config.pathToFCMWorker;if(e)return navigator.serviceWorker.register(e).catch((()=>!1))}();e&&(a.ZP.initializeApp(i),u=a.ZP.messaging(),u.usePublicVapidKey(r),u.useServiceWorker(e),t.zC&&t.zC.forEach((e=>{e.allowed&&requestPermission()})),u.onTokenRefresh((()=>{getMessagingToken()})),u.onMessage((({data:e})=>{if(void 0===e)return;const n=e.body+e.link;if(n===w)return;w=n;const o={body:e.body,icon:e.icon};new Notification(e.title,o).onclick=()=>{window.open(e.link,"_blank")}})))}()}}]);